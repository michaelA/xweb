<div  class = "imgcentered" >
<img  border="1" src=" /images/framedirect.png" alt="" width="1100" height="100" />
</div>

<div id = "model" class = "leftbody" >
<img  border="0" src="" alt="" width="400" height="400" />
</div>


<div class = "rightbody">
<table border = "1" >
	<tr>
		<th>Materials</th>
		<th>shape</th>
		<th>price</th>
	</tr>
  
	<tr>
	<td><select name="material" aligh = "center">
	<option value="All">All</option>
	<option value="plastic">Plastic</option>
	<option value="metal">Metal</option>
	</select>
	</td>
	<td><select name="shape">
	<option value="All">All</option>
	<option value="round">round</option>
	<option value="square">square</option>
	</select>

<td><select name="price" id ="price">
	<option value="All">All</option>
	<option value="below $20">below $20</option>
	<option value="below $10">"below $10</option>
	</select>

</tr>



   <% count = 0 %>
<% @clients.each do |client| %>
   <%if count == 0%><tr id = "image"><%end%>
    <td id = "frame"><%= link_to  image_tag(client.frame_url, :alt => "welcome to my own blog image.gif") , client.image_url ,{:id => client.id}%></td>
	  <% count += 1 %>

<% end %>


</table>
</div>

    </div>
     <div  id = "eyeglassstable">
    </div>
</div>


<script >


    $(document).ready(function(){
$("a").bind('click', function(e) {
       e.preventDefault();

     var mainImage = $(this).attr("href");

   var id = this.id;

   $("#model img").attr("src", mainImage);
   $.getJSON("clients.json",function(result,suc){
          for (i=0;i<=result.length;i++)
            {
                if(result[i].id == id)
                {
                    var content = "<div id = 'eyeglassstable' class='rightbodybottom'><font color ='#FFFFFF' >" +  "  &nbsp;Name:"+ "   " +result[i].name   ;
                   content +=  "  &nbsp; &nbsp;Material:" + result[i].material + "  &nbsp; color: " + result[i].color ;
                   content +=  "  &nbsp; &nbsp;&nbsp;Shape:" + result[i].shape + "  &nbsp;&nbsp; Price: " + result[i].price + "</div>";

                     $('#eyeglassstable'). replaceWith( content );
                  }
            }
       });(jQuery);


}); (jQuery);
 var sort_by = function(field, reverse, primer){

               reverse = (reverse) ? -1 : 1;

               return function(a,b){

                   a = a[field];
                   b = b[field];

                   if (typeof(primer) != 'undefined'){
                       a = primer(a);
                       b = primer(b);
                   }

                   if (a<b) return reverse * -1;
                   if (a>b) return reverse * 1;
                   return 0;

               }
            }
         $("#price").change(function()
         {
             alert("dfdd");

             $.getJSON("clients.json",function(result,suc){

                 result.sort(sort_by('price', true, parseFloat));
                 $("table").find("#image").remove();
                 var msg = "<tr id = 'image'>";
                for (i=0;i<=result.length - 1;i++)
                {
                   msg += "<td id = 'frame'><a id ='"+ result[i].id + "'href = " + '/images/frame_1.png?1301086457' +"><img src='" + result[i].image_url +"'/></a></td>" ;
                }
                msg +=  "</tr>";


                $("table tr:last").after(msg);
             });
                $("#model img").attr("src", "");

         });     });


</script>